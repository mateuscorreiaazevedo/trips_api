// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id String @id @default(cuid())

  email    String @unique
  password String

  firstName String
  lastName  String
  birthDate DateTime
  avatarUrl String?

  hosts     Host[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Host {
  id         String  @id @default(cuid())
  step       String?
  categoryId String
  userId     String

  title       String
  description String?
  images      Image[]
  location    Location @relation(fields: [locationId], references: [id])

  pricePerNight Float
  currency      String?
  cleaningFee   Float?

  bedrooms  Int
  bathrooms Int
  services  Service @relation(fields: [serviceId], references: [id])

  guests Int
  babies Int?

  user       User     @relation(fields: [userId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  locationId String
  serviceId  String

  @@map("hosts")
}

model Image {
  id     String @id @unique @default(cuid())
  url    String
  Host   Host   @relation(fields: [hostId], references: [id])
  hostId String

  @@map("images")
}

model Service {
  id              String  @id @default(cuid())
  kitchen         Boolean
  wifi            Boolean
  tv              Boolean
  pool            Boolean
  laundry         Boolean
  hairDryer       Boolean
  office          Boolean
  freeParking     Boolean
  airConditioning Boolean
  pets            Boolean
  Host            Host[]

  @@map("services")
}

model Location {
  id      String  @id @default(cuid())
  lat     Float
  lng     Float
  address String
  city    String
  state   String
  zipCode String?
  country String
  Host    Host[]

  @@map("locations")
}
